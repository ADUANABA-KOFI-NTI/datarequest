<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GES Teacher Data Collection</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}
.gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
.glass-effect {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
}
.input-focus {
    transition: all 0.3s ease;
}
.input-focus:focus {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}
.loader {
    border: 3px solid #f3f4f6;
    border-top: 3px solid #6366f1;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
</head>
<body class="min-h-screen gradient-bg p-4">
<div class="max-w-5xl mx-auto py-8">
<!-- Header -->
<div class="text-center mb-8">
<div class="inline-block p-4 bg-white rounded-full shadow-lg mb-4">
<svg class="w-12 h-12 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
</div>
<h1 class="text-4xl font-bold text-white mb-2">Teacher Data Collection</h1>
<p class="text-indigo-100 text-lg">Ahafo Ano South West Education Directorate</p>
<p class="text-indigo-200 text-sm mt-1">Ghana Education Service</p>
</div>

<!-- Main Form Card -->
<div class="glass-effect rounded-2xl shadow-2xl p-8 md:p-10">
<div id="statusMessage" class="hidden mb-6 p-4 rounded-xl flex items-start gap-3">
<svg id="statusIcon" class="w-6 h-6 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
<span id="statusText" class="font-medium"></span>
</div>

<div class="space-y-8">
<!-- Circuit & School Selection -->
<section class="border-b-2 border-indigo-100 pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
<span class="text-indigo-600 font-bold text-lg">1</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Circuit & School Selection</h2>
</div>
<div class="grid md:grid-cols-2 gap-6">
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Circuit *</label>
<select id="circuit" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
<option value="">Select Circuit</option>
<option value="Achiase">Achiase</option>
<option value="Barniekrom">Barniekrom</option>
<option value="Bonkwaso">Bonkwaso</option>
<option value="Hwibaa">Hwibaa</option>
<option value="Kunsu">Kunsu</option>
<option value="Kunsu_Camp">Kunsu Camp</option>
<option value="Mankranso">Mankranso</option>
<option value="Mpasaso">Mpasaso</option>
<option value="Wioso">Wioso</option>
</select>
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of School *</label>
<select id="schoolName" required disabled class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed">
<option value="">Select Circuit First</option>
</select>
</div>
</div>
</section>

<!-- Headteacher Information -->
<section class="border-b-2 border-indigo-100 pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
<span class="text-indigo-600 font-bold text-lg">2</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Headteacher Information</h2>
</div>
<div class="grid md:grid-cols-2 gap-6">
                <div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Headteacher *</label>
<input type="text" id="headteacherName" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
<p id="headteacherStatus" class="text-xs mt-1 text-gray-500 hidden"></p>
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Telephone Number of Headteacher *</label>
<input type="tel" id="headteacherPhone" required placeholder="e.g., 0244123456" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
</div>
</div>
</section>

<!-- Science Teacher -->
<section class="border-b-2 border-indigo-100 pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
<span class="text-green-600 font-bold text-lg">3</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Science Teacher</h2>
</div>
<div class="grid md:grid-cols-3 gap-6">
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Science Teacher</label>
<input type="text" id="scienceTeacherName" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-green-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Staff ID</label>
<input type="text" id="scienceTeacherID" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-green-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Telephone Number</label>
<input type="tel" id="scienceTeacherPhone" placeholder="e.g., 0244123456" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-green-500 focus:border-transparent">
</div>
</div>
</section>

<!-- Mathematics Teacher -->
<section class="border-b-2 border-indigo-100 pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
<span class="text-blue-600 font-bold text-lg">4</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Mathematics Teacher</h2>
</div>
<div class="grid md:grid-cols-3 gap-6">
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Mathematics Teacher</label>
<input type="text" id="mathTeacherName" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-blue-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Staff ID</label>
<input type="text" id="mathTeacherID" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-blue-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Telephone Number</label>
<input type="tel" id="mathTeacherPhone" placeholder="e.g., 0244123456" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-blue-500 focus:border-transparent">
</div>
</div>
</section>

<!-- Creative Arts Teacher -->
<section class="border-b-2 border-indigo-100 pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
<span class="text-purple-600 font-bold text-lg">5</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Creative Arts Teacher</h2>
</div>
<div class="grid md:grid-cols-3 gap-6">
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Creative Arts Teacher</label>
<input type="text" id="artsTeacherName" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-purple-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Staff ID</label>
<input type="text" id="artsTeacherID" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-purple-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Telephone Number</label>
<input type="tel" id="artsTeacherPhone" placeholder="e.g., 0244123456" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-purple-500 focus:border-transparent">
</div>
</div>
</section>

<!-- Career Technology Teacher -->
<section class="pb-8">
<div class="flex items-center gap-3 mb-6">
<div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
<span class="text-orange-600 font-bold text-lg">6</span>
</div>
<h2 class="text-2xl font-bold text-gray-800">Career Technology Teacher</h2>
</div>
<div class="grid md:grid-cols-3 gap-6">
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Name of Career Technology Teacher</label>
<input type="text" id="careerTeacherName" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-orange-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Staff ID</label>
<input type="text" id="careerTeacherID" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-orange-500 focus:border-transparent">
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Telephone Number</label>
<input type="tel" id="careerTeacherPhone" placeholder="e.g., 0244123456" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl input-focus focus:ring-2 focus:ring-orange-500 focus:border-transparent">
</div>
</div>
</section>

<button id="submitBtn" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-xl transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
<span class="flex items-center justify-center gap-2">
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
Submit Teacher Data
</span>
</button>
</div>
</div>

<!-- Footer -->
<div class="text-center mt-8 text-white">
<p class="text-sm opacity-90">© 2025 Ghana Education Service - Ahafo Ano South West</p>
</div>
</div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwZ1ohPCB3X72I7EKp06aFn-T2hQO0cVzVb0XHD2os_u8Lo23vSRd0SPLE6aC98AZ9p/exec'; // Replace with your actual deployment URL

const circuitSchoolMap = {
    "Achiase": [
        "ACHIASE D/A JHS", "ADIEMBRA D/A BASIC",
        "ANGO D/A BASIC", "ASUOKOR D/A JHS", 
        "DOTIEM-MPASASO D/A JHS", "MANHYIA D/A BASIC"
    ],
    "Barniekrom": [
        "BARNIEKROM D/A JHS", "BARNIEKROM ISLAMIC BASIC",
        "DUNYAN NKWANTA D/A JHS", 
        "NYAMEBEKYERE III D/A BASIC",
        "NYINANUFU D/A JHS",  "OHIAPAE D/A BASIC"
    ],
    "Bonkwaso": [
        "ABAASUA D/A BASIC", "AFRESENI D/A JHS",  "BOATENGKROM D/A JHS",
        "BONKWASO I D/A JHS", "BONKWASO I ISLAMIC BASIC", "BONKWASO II DA BASIC",
       "NKYENSEDANHO D/A BASIC"
    ],
    "Hwibaa": [
        "ABODEASE D/A BASIC", "ANITEMFE D/A BASIC", "ASUKESE ST. PETER'S D/A BASIC",
        "HWIBAA D/A JHS", "HWIBAA ISLAMIC BASIC",  "PEWODIE D/A BASIC"
    ],
    "Kunsu": [
        "KUNSU AL-AZIZ ISLAMIC BASIC", "KUNSU D/A JHS 'A'", "KUNSU D/A JHS 'B'",
        "KUNSU R/C BASIC SCHOOL",
      "NYAMEADOM D/A JHS"
    ],
    "Kunsu_Camp": [
       "ASIBEY-NKWANTA D/A JHS", 
        "BONKRON D/A BASIC", "KOKOTEASUA D/A BASIC",
        "KUNSU-CAMP D/A JHS",  "KUNSU-DOTIEM D/A JHS"
    ],
    "Mankranso": [
       "BEPOSO D/A JHS",  "MANKRANSO D/A JHS 'A'",
        "MANKRANSO D/A JHS 'B' SCHOOL",  "MANKRANSO HOLY PROPHET ISLAMIC BASIC",
        "MANKRANSO METHODIST JHS", 
    ],
    "Mpasaso": [
        "ADADEKROM D/A JHS",  "BONSUKROM D/A JHS",
        "MPASASO II D/A JHS",
       "MPASASO II ST. PETERS R/C JHS",
       "MPASASO NURIYA ISLAMIC BASIC",
        "MPASASO TABIRI GYANSA D/A JHS"
    ],
    "Wioso": [
        "DOMIABRA D/A JHS", 
        "WIOSO D/A JHS",  "WIOSO ST. PETER'S R/C JHS",
       
    ]
};

// Populate schools based on selected circuit
document.getElementById('circuit').addEventListener('change', function() {
    const circuit = this.value;
    const schoolSelect = document.getElementById('schoolName');

    schoolSelect.innerHTML = '<option value="">Select School</option>';

    if (circuit && circuitSchoolMap[circuit]) {
        schoolSelect.disabled = false;
        circuitSchoolMap[circuit].forEach(school => {
            const option = document.createElement('option');
            option.value = school;
            option.textContent = school;
            schoolSelect.appendChild(option);
        });
    } else {
        schoolSelect.disabled = true;
        schoolSelect.innerHTML = '<option value="">Select Circuit First</option>';
    }
    
    // Clear headteacher name when circuit changes
    document.getElementById('headteacherName').value = '';
    document.getElementById('headteacherName').classList.remove('bg-yellow-50', 'border-yellow-400');
    document.getElementById('headteacherStatus').classList.add('hidden');
});

// Fetch headteacher name when school is selected
document.getElementById('schoolName').addEventListener('change', async function() {
    const schoolName = this.value;
    const headteacherInput = document.getElementById('headteacherName');
    const statusText = document.getElementById('headteacherStatus');
    
    if (!schoolName) {
        headteacherInput.value = '';
        headteacherInput.classList.remove('bg-yellow-50', 'border-yellow-400');
        statusText.classList.add('hidden');
        return;
    }
    
    // Show loading state
    headteacherInput.value = 'Loading...';
    headteacherInput.disabled = true;
    statusText.textContent = 'Fetching headteacher data...';
    statusText.className = 'text-xs mt-1 text-blue-600';
    statusText.classList.remove('hidden');
    
    try {
        const response = await fetch(`${SCRIPT_URL}?action=getHeadteacher&schoolName=${encodeURIComponent(schoolName)}`);
        const result = await response.json();
        
        if (result.status === 'success' && result.headteacher) {
            headteacherInput.value = result.headteacher;
            headteacherInput.classList.add('bg-yellow-50', 'border-yellow-400');
            headteacherInput.disabled = false;
            statusText.textContent = '✓ Auto-filled from SCH BIODATA (you can edit if needed)';
            statusText.className = 'text-xs mt-1 text-green-600';
        } else {
            headteacherInput.value = '';
            headteacherInput.classList.remove('bg-yellow-50', 'border-yellow-400');
            headteacherInput.disabled = false;
            statusText.textContent = 'No headteacher found in SCH BIODATA. Please enter manually.';
            statusText.className = 'text-xs mt-1 text-orange-600';
        }
    } catch (error) {
        console.error('Error fetching headteacher:', error);
        headteacherInput.value = '';
        headteacherInput.classList.remove('bg-yellow-50', 'border-yellow-400');
        headteacherInput.disabled = false;
        statusText.textContent = 'Error fetching data. Please enter manually.';
        statusText.className = 'text-xs mt-1 text-red-600';
    }
});

function showStatus(message, isSuccess) {
    const statusDiv = document.getElementById('statusMessage');
    const statusIcon = document.getElementById('statusIcon');
    const statusText = document.getElementById('statusText');

    statusDiv.className = `mb-6 p-4 rounded-xl flex items-start gap-3 ${isSuccess ? 'bg-green-50 border-2 border-green-200' : 'bg-red-50 border-2 border-red-200'}`;
    statusIcon.className = `w-6 h-6 mt-0.5 flex-shrink-0 ${isSuccess ? 'text-green-600' : 'text-red-600'}`;
    statusText.className = `font-medium ${isSuccess ? 'text-green-800' : 'text-red-800'}`;
    statusText.textContent = message;

    statusDiv.classList.remove('hidden');
    statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

document.getElementById('submitBtn').addEventListener('click', submitForm);

async function submitForm() {
    const btn = document.getElementById('submitBtn');

    // Validate required fields
    const circuit = document.getElementById('circuit').value;
    const schoolName = document.getElementById('schoolName').value;
    const headteacherName = document.getElementById('headteacherName').value;
    const headteacherPhone = document.getElementById('headteacherPhone').value;

    if (!circuit || !schoolName || !headteacherName || !headteacherPhone) {
        showStatus('Please fill in all required fields marked with *', false);
        return;
    }

    btn.disabled = true;
    btn.innerHTML = '<span class="flex items-center justify-center gap-2"><svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Submitting...</span>';

    const formData = {
        circuit: circuit,
        schoolName: schoolName,
        headteacherName: headteacherName,
        headteacherPhone: headteacherPhone,
        scienceTeacherName: document.getElementById('scienceTeacherName').value,
        scienceTeacherID: document.getElementById('scienceTeacherID').value,
        scienceTeacherPhone: document.getElementById('scienceTeacherPhone').value,
        mathTeacherName: document.getElementById('mathTeacherName').value,
        mathTeacherID: document.getElementById('mathTeacherID').value,
        mathTeacherPhone: document.getElementById('mathTeacherPhone').value,
        artsTeacherName: document.getElementById('artsTeacherName').value,
        artsTeacherID: document.getElementById('artsTeacherID').value,
        artsTeacherPhone: document.getElementById('artsTeacherPhone').value,
        careerTeacherName: document.getElementById('careerTeacherName').value,
        careerTeacherID: document.getElementById('careerTeacherID').value,
        careerTeacherPhone: document.getElementById('careerTeacherPhone').value
    };

    try {
        const response = await fetch(SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });

        showStatus('Teacher data submitted successfully!', true);
        
        // Reset form after 2 seconds
        setTimeout(() => {
            document.querySelectorAll('input[type="text"], input[type="tel"]').forEach(el => {
                el.value = '';
            });
            document.getElementById('circuit').value = '';
            document.getElementById('schoolName').disabled = true;
            document.getElementById('schoolName').innerHTML = '<option value="">Select Circuit First</option>';
        }, 2000);

    } catch (error) {
        showStatus('Error submitting form. Please try again.', false);
    } finally {
        btn.disabled = false;
        btn.innerHTML = '<span class="flex items-center justify-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Submit Teacher Data</span>';
    }
}
</script>
</body>
</html>